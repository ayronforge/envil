---
import { presets } from "../data/content.ts";
import { getIcon } from "../lib/utils.ts";
import CodeBlock from "./CodeBlock.astro";

const iconsBlack = await Promise.all(presets.map((p) => getIcon(p.icon, "black")));
const iconsWhite = await Promise.all(presets.map((p) => getIcon(p.icon, "white")));
---

<section class="relative pb-28 px-6 lg:px-12">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-16">
      <h2 class="text-3xl sm:text-4xl font-extrabold tracking-tight mb-4">Framework Presets</h2>
      <p class="text-muted text-lg max-w-xl mx-auto">Get started instantly with pre-configured presets for popular frameworks.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      {presets.map((preset, i) => (
        <div class="glass-card glass-hover rounded-2xl p-5 flex flex-col">
          <div class="flex items-center gap-3 mb-4">
            <span class="w-8 h-8 rounded-lg bg-secondary/10 border border-secondary/10 flex items-center justify-center">
              <img src={iconsBlack[i]} alt={preset.name} class="w-4 h-4" data-theme-visible="light" />
              <img src={iconsWhite[i]} alt={preset.name} class="w-4 h-4" data-theme-visible="dark" />
            </span>
            <h3 class="text-primary font-semibold">{preset.name}</h3>
            <span class="ml-auto text-[10px] font-mono text-muted px-2 py-0.5 rounded-md bg-primary/5 border border-primary/5">{preset.prefix}</span>
          </div>
          <div class="mt-auto">
            <CodeBlock code={preset.code} />
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
