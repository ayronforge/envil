---
import Layout from "./Layout.astro";
import DocsHeader from "@/components/docs/DocsHeader.astro";
import Breadcrumbs from "@/components/docs/Breadcrumbs.astro";
import DocsFooter from "@/components/docs/DocsFooter.astro";
import { Sidebar } from "@/components/docs/Sidebar";
import { TableOfContents } from "@/components/docs/TableOfContents";
import { docsNav } from "@/data/docs-nav";

interface Props {
  title: string;
  description: string;
  headings: { depth: number; slug: string; text: string }[];
  currentSlug: string;
}

const { title, description, headings, currentSlug } = Astro.props;
---

<Layout
  title={`${title} â€” better-env`}
  description={description}
  ogImage={`/og/${currentSlug ? `docs/${currentSlug}` : "docs"}.png`}
  bodyClass="bg-background text-primary font-sans antialiased"
>
  <DocsHeader currentSlug={currentSlug} />

  <div class="docs-grid">
    <!-- Sidebar -->
    <aside class="docs-sidebar hidden lg:block border-r border-border py-6 px-4">
      <Sidebar client:load sections={docsNav} currentSlug={currentSlug} baseUrl={import.meta.env.BASE_URL} />
    </aside>

    <!-- Main content -->
    <main class="min-w-0 px-6 lg:px-10 py-8 max-w-3xl mx-auto w-full">
      <Breadcrumbs currentSlug={currentSlug} />
      <article class="docs-prose">
        <h1>{title}</h1>
        <p class="text-muted text-lg mt-2 mb-8 leading-relaxed">{description}</p>
        <slot />
      </article>
      <DocsFooter currentSlug={currentSlug} />
    </main>

    <!-- Table of Contents -->
    <aside class="docs-toc hidden xl:block py-8 pr-4">
      <TableOfContents client:load headings={headings} />
    </aside>
  </div>
</Layout>

<style is:global>
  @import "../styles/docs.css";
</style>
